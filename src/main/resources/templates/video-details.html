<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Intelligence Extractor - VidGenius</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%234F46E5' stroke-width='2'%3E%3Cpath d='M9.5 2a2.5 2.5 0 0 1 5 0v.5a2.5 2.5 0 0 1 2.5 2.5v1a2 2 0 0 1 2 2v1a2 2 0 0 1-2 2h-.5a2 2 0 0 1-2 2v1.5a2.5 2.5 0 0 1-2.5 2.5h-1a2.5 2.5 0 0 1-2.5-2.5V15a2 2 0 0 1-2-2v-1a2 2 0 0 1 2-2V9a2.5 2.5 0 0 1 2.5-2.5V2.5z'/%3E%3Cpolygon points='10 8 16 12 10 16' fill='%234F46E5'/%3E%3C/svg%3E">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        body { background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 100%); }
        .glass-card { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.08); }
        .progress-ring__circle { transition: stroke-dashoffset 1.5s ease-out; transform: rotate(-90deg); transform-origin: 50% 50%; }
        .coming-soon-overlay { backdrop-filter: blur(4px); }
    </style>
</head>
<body class="text-white">

<div th:replace="~{fragments/navbar :: navbar}" th:with="activePage='video'"></div>

<div class="container mx-auto px-4 py-8 max-w-6xl mt-20">
    <div class="text-center mb-10"><div class="inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-indigo-500 to-indigo-600 mb-5 shadow-2xl shadow-indigo-500/50"><i class="bi bi-robot text-white text-3xl"></i></div><h1 class="text-4xl md:text-5xl font-black">Video Intelligence Extractor</h1><p class="text-md text-gray-400 mt-2 max-w-2xl mx-auto">Extract actionable insights from any YouTube video.</p></div>
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12">
        <div class="space-y-4 my-auto"><div class="flex items-center gap-4"><div class="w-12 h-12 rounded-lg bg-indigo-500/20 flex items-center justify-center"><i class="bi bi-search text-2xl text-indigo-300"></i></div><div><h3 class="font-bold text-white">Analyze Competitors</h3><p class="text-sm text-gray-400">Deconstruct what makes top videos successful.</p></div></div><div class="flex items-center gap-4"><div class="w-12 h-12 rounded-lg bg-indigo-500/20 flex items-center justify-center"><i class="bi bi-graph-up-arrow text-2xl text-indigo-300"></i></div><div><h3 class="font-bold text-white">Optimize SEO</h3><p class="text-sm text-gray-400">Get optimization scores YouTube doesn't show you.</p></div></div><div class="flex items-center gap-4"><div class="w-12 h-12 rounded-lg bg-indigo-500/20 flex items-center justify-center"><i class="bi bi-recycle text-2xl text-indigo-300"></i></div><div><h3 class="font-bold text-white">Repurpose Content</h3><p class="text-sm text-gray-400">Download assets and extract text for other platforms.</p></div></div></div>
        <div class="glass-card rounded-2xl p-8 border border-indigo-500/20 shadow-xl"><h2 class="text-xl font-bold text-center mb-4">Enter a YouTube URL</h2><form th:action="@{/youtube/video-details}" method="post" class="space-y-4"><input type="url" name="videoUrl" class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl placeholder-gray-500" placeholder="https://www.youtube.com/watch?v=..." required><button type="submit" class="w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-semibold py-3 px-6 rounded-xl flex items-center justify-center space-x-2"><i class="bi bi-box-arrow-in-down"></i><span>Extract Data</span></button></form></div>
    </div>

    <div th:if="${videoDetails != null}" class="space-y-8">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="lg:col-span-2 glass-card rounded-2xl p-6">
                <div class="flex flex-col md:flex-row gap-6"><img th:src="${videoDetails.thumbnail}" class="w-full md:w-1/2 aspect-video object-cover rounded-xl border border-white/10"><div class="flex-1 space-y-3"><p class="text-sm text-indigo-400 font-semibold" th:text="${videoDetails.channel}"></p><h2 class="text-2xl font-bold text-white" th:text="${videoDetails.title}"></h2><div class="flex flex-wrap items-center gap-x-4 gap-y-2 text-sm text-gray-300"><span><i class="bi bi-eye-fill text-blue-400"></i> <span th:text="${videoDetails.views}"></span></span><span><i class="bi bi-hand-thumbs-up-fill text-green-400"></i> <span th:text="${videoDetails.likes}"></span></span><span><i class="bi bi-clock-fill text-purple-400"></i> <span th:text="${videoDetails.duration}"></span></span></div></div></div>
                <div class="h-px bg-white/10 my-6"></div><h3 class="font-bold text-lg text-white mb-3"><i class="bi bi-body-text"></i> Description & Tags</h3><pre class="whitespace-pre-wrap font-sans text-gray-300 text-sm leading-relaxed glass-card p-4 rounded-lg mb-6 max-h-40 overflow-y-auto" th:text="${videoDetails.description}"></pre><div class="flex flex-wrap gap-2 max-h-24 overflow-y-auto"><span th:each="tag : ${videoDetails.tags}" th:text="${tag}" class="px-3 py-1.5 rounded-lg bg-indigo-500/10 text-indigo-300 text-xs font-medium"></span></div>
            </div>

            <div class="space-y-6">
                <div class="glass-card rounded-2xl p-6">
                    <h3 class="font-bold text-lg text-white mb-4 flex items-center gap-2"><i class="bi bi-shield-check text-green-400"></i> SEO Scorecard</h3>
                    <div class="grid grid-cols-3 gap-4 text-center">
                        <div><div class="relative w-24 h-24 mx-auto"><svg class="w-full h-full" viewBox="0 0 100 100"><circle class="text-gray-700" stroke-width="8" stroke="currentColor" fill="transparent" r="42" cx="50" cy="50" /><circle id="progress-circle-title" class="progress-ring__circle text-green-400" stroke-width="8" stroke-linecap="round" stroke="currentColor" fill="transparent" r="42" cx="50" cy="50" th:data-score="${videoDetails.seoReport.titleScore}" /></svg><div class="absolute inset-0 flex items-center justify-center"><span id="score-text-title" class="text-2xl font-black text-white">0</span></div></div><p class="text-xs font-semibold text-gray-400 mt-2">Title</p></div>
                        <div><div class="relative w-24 h-24 mx-auto"><svg class="w-full h-full" viewBox="0 0 100 100"><circle class="text-gray-700" stroke-width="8" stroke="currentColor" fill="transparent" r="42" cx="50" cy="50" /><circle id="progress-circle-desc" class="progress-ring__circle text-blue-400" stroke-width="8" stroke-linecap="round" stroke="currentColor" fill="transparent" r="42" cx="50" cy="50" th:data-score="${videoDetails.seoReport.descriptionScore}" /></svg><div class="absolute inset-0 flex items-center justify-center"><span id="score-text-desc" class="text-2xl font-black text-white">0</span></div></div><p class="text-xs font-semibold text-gray-400 mt-2">Description</p></div>
                        <div><div class="relative w-24 h-24 mx-auto"><svg class="w-full h-full" viewBox="0 0 100 100"><circle class="text-gray-700" stroke-width="8" stroke="currentColor" fill="transparent" r="42" cx="50" cy="50" /><circle id="progress-circle-tags" class="progress-ring__circle text-purple-400" stroke-width="8" stroke-linecap="round" stroke="currentColor" fill="transparent" r="42" cx="50" cy="50" th:data-score="${videoDetails.seoReport.tagsScore}" /></svg><div class="absolute inset-0 flex items-center justify-center"><span id="score-text-tags" class="text-2xl font-black text-white">0</span></div></div><p class="text-xs font-semibold text-gray-400 mt-2">Tags</p></div>
                    </div>
                    <details class="text-left mt-6"><summary class="cursor-pointer text-sm text-blue-400 hover:text-blue-300 font-semibold">Show Actionable Checklist</summary><ul class="space-y-3 text-sm mt-3"><li th:each="item : ${videoDetails.seoReport.checklist}" class="flex items-start gap-3"><i class="bi mt-1" th:classappend="${item.passed} ? 'bi-check-circle-fill text-green-400' : 'bi-exclamation-triangle-fill text-yellow-400'"></i><span th:text="${item.text}" th:classappend="${item.passed} ? 'text-gray-300' : 'text-white font-semibold'"></span></li></ul></details>
                </div>
            </div>
        </div>

        <div class="glass-card rounded-2xl p-6 relative overflow-hidden">
            <div class="absolute top-2 right-2 px-3 py-1 rounded-full bg-blue-500/20 text-blue-300 text-xs font-bold">POWERED BY AI</div>
            <h2 class="text-2xl font-bold mb-4 text-white">Advanced Intelligence</h2>
            <div class="grid grid-cols-1 md:grid-cols-5 gap-6">
                <div class="md:col-span-3 relative glass-card rounded-xl p-4 opacity-60"><div class="absolute inset-0 coming-soon-overlay flex items-center justify-center rounded-xl"><span class="font-bold text-white px-4 py-2 bg-black/30 rounded-lg">Coming Soon</span></div><h3 class="font-semibold mb-2 flex items-center gap-2"><i class="bi bi-file-text-fill"></i>Video Transcript</h3><div class="space-y-2 text-sm text-gray-400"><p class="w-full h-3 bg-gray-600 rounded animate-pulse"></p><p class="w-5/6 h-3 bg-gray-600 rounded animate-pulse" style="animation-delay: 0.1s;"></p><p class="w-full h-3 bg-gray-600 rounded animate-pulse" style="animation-delay: 0.2s;"></p><p class="w-3/4 h-3 bg-gray-600 rounded animate-pulse" style="animation-delay: 0.3s;"></p></div></div>
                <div class="md:col-span-2 relative glass-card rounded-xl p-4 opacity-60"><div class="absolute inset-0 coming-soon-overlay flex items-center justify-center rounded-xl"><span class="font-bold text-white px-4 py-2 bg-black/30 rounded-lg">Coming Soon</span></div><h3 class="font-semibold mb-2 flex items-center gap-2"><i class="bi bi-chat-dots-fill"></i>Chat with Video</h3><div class="space-y-2 text-sm"><div class="p-2 bg-indigo-500/20 rounded-lg text-indigo-200 self-start w-5/6">What is this video about?</div><div class="p-2 bg-gray-600 rounded-lg w-full h-4 animate-pulse"></div></div></div>
            </div>
        </div>
    </div>
</div>

<script th:replace="~{fragments/navbar :: navbar-script}"></script>
<script>
    function animateScore(circleId, textId) { const circle = document.getElementById(circleId); if (!circle) return; const score = parseInt(circle.getAttribute('data-score'), 10); const scoreText = document.getElementById(textId); const radius = circle.r.baseVal.value; const circumference = 2 * Math.PI * radius; const offset = circumference - (score / 100) * circumference; circle.style.strokeDasharray = `${circumference} ${circumference}`; setTimeout(() => { circle.style.strokeDashoffset = offset; let currentScore = 0; const interval = setInterval(() => { if (currentScore >= score) { clearInterval(interval); scoreText.textContent = score; } else { currentScore++; scoreText.textContent = currentScore; } }, 20); }, 300); }
    document.addEventListener('DOMContentLoaded', () => { animateScore('progress-circle-title', 'score-text-title'); animateScore('progress-circle-desc', 'score-text-desc'); animateScore('progress-circle-tags', 'score-text-tags'); });
</script>
</body>
</html>